/**  Simple Ajax Uploader v2.2.1 Copyright 2012-2015 LPology, LLC  MIT license https://github.com/LPology/Simple-Ajax-Uploader */
(function(a,b){if(typeof define==="function"&&typeof define.amd==="object"){define(b)}else{if(typeof module!=="undefined"&&module.exports){module.exports=b()}else{this[a]=b()}}}("ss",function(){var k=window.ss||{},j=/^\s+/,g=/\s+$/,b=/[xy]/g,c=/.*(\/|\\)/,e=/.*[.]/,d=/[\t\r\n]/g,f=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,a=(navigator.userAgent.indexOf("MSIE 7")!==-1),h=document.createElement("input"),i;h.type="file";i=("multiple" in h&&typeof File!=="undefined"&&typeof(new XMLHttpRequest()).upload!=="undefined");k.obj2string=function(o,n){var p=[];for(var q in o){if(o.hasOwnProperty(q)){var m=n?n+"["+q+"]":q,l=o[q];p.push(typeof l==="object"?k.obj2string(l,m):encodeURIComponent(m)+"="+encodeURIComponent(l))}}return p.join("&")};k.extendObj=function(m,l){for(var n in l){if(l.hasOwnProperty(n)){m[n]=l[n]}}};k.addEvent=function(n,m,l){if(n.addEventListener){n.addEventListener(m,l,false)}else{n.attachEvent("on"+m,l)}return function(){k.removeEvent(n,m,l)}};k.removeEvent=function(n,m,l){if(n.removeEventListener){n.removeEventListener(m,l,false)}else{n.detachEvent("on"+m,l)}};k.newXHR=function(){if(typeof XMLHttpRequest!=="undefined"){return new window.XMLHttpRequest()}else{if(window.ActiveXObject){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(l){return false}}}};k.getIFrame=function(){var m=k.getUID(),l;if(a){l=document.createElement('<iframe src="javascript:false;" name="'+m+'">')}else{l=document.createElement("iframe");l.src="javascript:false;";l.name=m}l.style.display="none";l.id=m;return l};k.getForm=function(m){var l=document.createElement("form");l.encoding="multipart/form-data";l.enctype="multipart/form-data";l.style.display="none";for(var n in m){if(m.hasOwnProperty(n)){l[n]=m[n]}}return l};k.getHidden=function(m,n){var l=document.createElement("input");l.type="hidden";l.name=m;l.value=n;return l};k.parseJSON=function(m){if(!m){return false}m=k.trim(m+"");if(window.JSON&&window.JSON.parse){try{return window.JSON.parse(m+"")}catch(l){return false}}var n=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g,o=null,p;return m&&!k.trim(m.replace(n,function(s,q,r,t){if(p&&q){o=0}if(o===0){return s}p=r||q;o+=!t-!r;return""}))?(Function("return "+m))():false};k.getBox=function(n){var m,l,p=0,o=0;if(n.getBoundingClientRect){m=n.getBoundingClientRect();l=document.documentElement;p=m.top+(window.pageYOffset||l.scrollTop)-(l.clientTop||0);o=m.left+(window.pageXOffset||l.scrollLeft)-(l.clientLeft||0)}else{do{o+=n.offsetLeft;p+=n.offsetTop}while((n=n.offsetParent))}return{top:Math.round(p),left:Math.round(o)}};k.addStyles=function(n,m){for(var l in m){if(m.hasOwnProperty(l)){n.style[l]=m[l]}}};k.copyLayout=function(n,m){var l=k.getBox(n);k.addStyles(m,{position:"absolute",left:l.left+"px",top:l.top+"px",width:n.offsetWidth+"px",height:n.offsetHeight+"px"})};k.getUID=function(){return"axxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(b,function(n){var m=Math.random()*16|0,l=n=="x"?m:(m&3|8);return l.toString(16)})};k.trim=function(l){return l.toString().replace(j,"").replace(g,"")};k.getFilename=function(l){return l.replace(c,"")};k.getExt=function(l){return(-1!==l.indexOf("."))?l.replace(e,""):""};k.hasClass=function(m,l){return(" "+m.className+" ").replace(d," ").indexOf(" "+l+" ")>=0};k.addClass=function(m,l){if(!l||l===""){return false}if(!k.hasClass(m,l)){m.className+=" "+l}};k.removeClass=(function(){var l={};return function(n,m){if(!l[m]){l[m]=new RegExp("(?:^|\\s)"+m+"(?!\\S)")}n.className=n.className.replace(l[m],"")}})();k.purge=function(q){var o=q.attributes,p,m,r;if(o){for(p=o.length-1;p>=0;p-=1){r=o[p].name;if(typeof q[r]==="function"){q[r]=null}}}o=q.childNodes;if(o){m=o.length;for(p=0;p<m;p+=1){k.purge(q.childNodes[p])}}};k.remove=function(l){if(l&&l.parentNode){k.purge(l);l.parentNode.removeChild(l)}l=null};k.verifyElem=function(l){if(typeof jQuery!=="undefined"&&l instanceof jQuery){l=l[0]}else{if(typeof l==="string"){if(l.charAt(0)=="#"){l=l.substr(1)}l=document.getElementById(l)}}if(!l||l.nodeType!==1){return false}if(l.nodeName.toUpperCase()=="A"){l.style.cursor="pointer";k.addEvent(l,"click",function(m){if(m&&m.preventDefault){m.preventDefault()}else{if(window.event){window.event.returnValue=false}}})}return l};k._options={};k.uploadSetup=function(l){k.extendObj(k._options,l)};k.SimpleUpload=function(m){var o,l,n;this._opts={button:"",url:"",dropzone:"",dragClass:"",cors:false,progressUrl:false,sessionProgressUrl:false,nginxProgressUrl:false,multiple:false,maxUploads:3,queue:true,checkProgressInterval:500,keyParamName:"APC_UPLOAD_PROGRESS",sessionProgressName:"PHP_SESSION_UPLOAD_PROGRESS",nginxProgressHeader:"X-Progress-ID",corsInputName:"XHR_CORS_TARGETORIGIN",allowedExtensions:[],accept:"",maxSize:false,name:"",data:{},noParams:false,autoSubmit:true,multipart:false,method:"POST",responseType:"",debug:false,hoverClass:"",focusClass:"",disabledClass:"",customHeaders:{},encodeCustomHeaders:false,onAbort:function(p,r,q){},onChange:function(p,s,r,q){},onSubmit:function(p,s,r,q){},onProgress:function(p){},onUpdateFileSize:function(p){},onComplete:function(q,p,s,r){},onExtError:function(p,q){},onSizeError:function(q,p){},onError:function(r,u,p,v,q,t,s){},startXHR:function(q,p,r){},endXHR:function(q,p,r){},startNonXHR:function(p,q){},endNonXHR:function(p,q){}};k.extendObj(this._opts,k._options);k.extendObj(this._opts,m);m=null;this._btns=[];if(this._opts.button instanceof Array){l=this._opts.button.length;for(o=0;o<l;o++){n=k.verifyElem(this._opts.button[o]);if(n!==false){this._btns.push(this.rerouteClicks(n))}else{this.log("Button with array index "+o+" is invalid")}}}else{n=k.verifyElem(this._opts.button);if(n!==false){this._btns.push(this.rerouteClicks(n))}}delete this._opts.button;if(this._opts.dropzone===""&&(this._btns.length<1||this._btns[0]===false)){throw new Error("Invalid button. Make sure the element you're passing exists.")}if(this._opts.multiple===false){this._opts.maxUploads=1}this._queue=[];this._active=0;this._disabled=false;this._maxFails=10;this._progKeys={};if(!i){this._sizeFlags={}}if(i&&this._opts.dropzone!==""){this._dzone=k.verifyElem(this._opts.dropzone);if(!this._dzone){this.log("Invalid or nonexistent element passed for drop zone")}else{this.addDropZone(this._dzone)}}this._createInput();this._manDisabled=false;this.enable(true)};k.SimpleUpload.prototype={destroy:function(){var l=this._btns.length;while(l--){if(this._btns[l].off){this._btns[l].off()}k.removeClass(this._btns[l],this._opts.hoverClass);k.removeClass(this._btns[l],this._opts.focusClass);k.removeClass(this._btns[l],this._opts.disabledClass);this._btns[l].disabled=false}k.remove(this._input.parentNode);for(var m in this){if(this.hasOwnProperty(m)){delete this.prop}}},log:function(l){if(this._opts.debug&&window.console&&window.console.log){window.console.log("[Uploader] "+l)}},setData:function(l){this._opts.data=l},setOptions:function(l){k.extendObj(this._opts,l)},setProgressBar:function(l){this._progBar=k.verifyElem(l)},setPctBox:function(l){this._pctBox=k.verifyElem(l)},setFileSizeBox:function(l){this._sizeBox=k.verifyElem(l)},setProgressContainer:function(l){this._progBox=k.verifyElem(l)},setAbortBtn:function(m,l){this._abortBtn=k.verifyElem(m);this._removeAbort=false;if(l){this._removeAbort=true}},getQueueSize:function(){return this._queue.length},_cycleQueue:function(){if(this._queue.length>0&&this._opts.autoSubmit){this.submit()}},removeCurrent:function(m){if(m){var l=this._queue.length;while(l--){if(this._queue[l].id===m){this._queue.splice(l,1);break}}}else{this._queue.splice(0,1)}this._cycleQueue()},clearQueue:function(){this._queue.length=0},disable:function(l){var m=this._btns.length,n;this._manDisabled=!l||this._manDisabled===true?true:false;this._disabled=true;while(m--){n=this._btns[m].nodeName.toUpperCase();if(n=="INPUT"||n=="BUTTON"){this._btns[m].disabled=true}if(this._opts.disabledClass!==""){k.addClass(this._btns[m],this._opts.disabledClass)}}if(this._input&&this._input.parentNode){this._input.parentNode.style.visibility="hidden"}},enable:function(l){if(!l){this._manDisabled=false}if(this._manDisabled===true){return}var m=this._btns.length;this._disabled=false;while(m--){k.removeClass(this._btns[m],this._opts.disabledClass);this._btns[m].disabled=false}},updatePosition:function(){if(this._btns[0]&&this._input&&this._input.parentNode){this._overBtn=this._btns[0];k.copyLayout(this._btns[0],this._input.parentNode)}}};k.IframeUpload={_getHost:function(m){var l=document.createElement("a");l.href=m;if(l.hostname){return l.hostname.toLowerCase()}return m},_addFiles:function(m){var l=k.getFilename(m.value),n=k.getExt(l);if(false===this._opts.onChange.call(this,l,n,this._overBtn)){return false}this._queue.push({id:k.getUID(),file:m,name:l,ext:n,btn:this._overBtn,size:null});return true},_uploadIframe:function(z,t,m,y,A,l,r){var x=this,v=this._opts,D=k.getUID(),u=k.getIFrame(),o,s,B=false,w=false,n,q,p;if(v.noParams===true){s=v.url}else{s=!v.nginxProgressUrl?v.url:s+((s.indexOf("?")>-1)?"&":"?")+encodeURIComponent(v.nginxProgressHeader)+"="+encodeURIComponent(D)}o=k.getForm({action:s,target:u.name,method:v.method});v.onProgress.call(this,0);if(A){A.innerHTML="0%"}if(y){y.style.width="0%"}if(v.cors){n=k.addEvent(window,"message",function(E){if(x._getHost(E.origin)!=x._getHost(v.url)){x.log("Non-matching origin: "+E.origin);return}B=true;n();v.endNonXHR.call(x,z.name,z.btn);x._finish(z,"","",E.data,m,t,A,l,r)})}var C=k.addEvent(u,"load",function(){C();if(v.sessionProgressUrl){o.appendChild(k.getHidden(v.sessionProgressName,D))}else{if(v.progressUrl){o.appendChild(k.getHidden(v.keyParamName,D))}}for(var E in v.data){if(v.data.hasOwnProperty(E)){o.appendChild(k.getHidden(E,v.data[E]))}}if(v.cors){o.appendChild(k.getHidden(v.corsInputName,window.location.href))}o.appendChild(z.file);q=k.addEvent(u,"load",function(){if(!u.parentNode||w){return}w=true;delete x._progKeys[D];delete x._sizeFlags[D];q();if(l){k.removeEvent(l,"click",p)}if(v.cors){window.setTimeout(function(){k.remove(o);k.remove(u);if(!B){x._errorFinish(z,"","",false,"error",t,m,A,l,r)}v=D=o=u=m=t=A=l=r=null},600)}else{try{var H=u.contentDocument?u.contentDocument:u.contentWindow.document,F=H.body.innerHTML;v.endNonXHR.call(x,z.name,z.btn);x._finish(z,"","",F,m,t,A,l,r)}catch(G){x._errorFinish(z,"",G.message,false,"error",t,m,A,l,r)}window.setTimeout(function(){k.remove(o);k.remove(u);o=u=null},0);z=v=D=m=t=A=null}});if(l){p=function(){k.removeEvent(l,"click",p);delete x._progKeys[D];delete x._sizeFlags[D];if(u){w=true;q();try{if(u.contentWindow.document.execCommand){u.contentWindow.document.execCommand("Stop")}}catch(F){}try{u.src="javascript".concat(":false;")}catch(F){}window.setTimeout(function(){k.remove(o);k.remove(u);o=u=null},0)}x.log("Upload aborted");v.onAbort.call(x,z.name,z.btn,z.size);x._last(m,t,A,l,r)};k.addEvent(l,"click",p)}x.log("Commencing upload using iframe");o.submit();if(x._hasProgUrl){x._progKeys[D]=1;window.setTimeout(function(){x._getProg(D,y,m,A,1);y=m=A=null},v.checkProgressInterval)}window.setTimeout(function(){x.removeCurrent(z.id)},0)});document.body.appendChild(o);document.body.appendChild(u)},_getProg:function(t,s,n,x,o){var w=this,m=this._opts,q=new Date().getTime(),v,p,u;if(!t){return}if(m.nginxProgressUrl){p=m.nginxProgressUrl+"?"+encodeURIComponent(m.nginxProgressHeader)+"="+encodeURIComponent(t)+"&_="+q}else{if(m.sessionProgressUrl){p=m.sessionProgressUrl}else{if(m.progressUrl){p=m.progressUrl+"?progresskey="+encodeURIComponent(t)+"&_="+q}}}u=function(){var z,A,B,y,D;try{if(u&&(m.cors||v.readyState===4)){u=undefined;v.onreadystatechange=function(){};try{D=v.statusText;y=v.status}catch(C){D="";y=""}if(m.cors||(y>=200&&y<300)){z=k.parseJSON(v.responseText);if(z===false){w.log("Error parsing progress response (expecting JSON)");return}if(m.nginxProgressUrl){if(z.state=="uploading"){A=parseInt(z.size,10);if(A>0){B=Math.round((parseInt(z.received,10)/A)*100);A=Math.round(A/1024)}}else{if(z.state=="done"){B=100}else{if(z.state=="error"){w.log("Error requesting upload progress: "+z.status);return}}}}else{if(m.sessionProgressUrl||m.progressUrl){if(z.success===true){A=parseInt(z.size,10);B=parseInt(z.pct,10)}}}if(B){if(x){x.innerHTML=B+"%"}if(s){s.style.width=B+"%"}m.onProgress.call(w,B)}if(A&&!w._sizeFlags[t]){if(n){n.innerHTML=A+"K"}w._sizeFlags[t]=1;m.onUpdateFileSize.call(w,A)}if(!B&&!A&&o>=w._maxFails){o++;w.log("Failed progress request limit reached. Count: "+o);return}if(B<100&&w._progKeys[t]){window.setTimeout(function(){w._getProg(t,s,n,x,o);t=s=n=x=o=null},m.checkProgressInterval)}}else{delete w._progKeys[t];w.log("Error requesting upload progress: "+y+" "+D)}v=A=B=y=D=z=null}}catch(C){w.log("Error requesting upload progress: "+C.message)}};if(m.cors&&!m.sessionProgressUrl){if(window.XDomainRequest){v=new window.XDomainRequest();v.open("GET",p,true);v.onprogress=v.ontimeout=function(){};v.onload=u;v.onerror=function(){delete w._progKeys[t];t=null;w.log("Error requesting upload progress")}}else{return}}else{var l=!m.sessionProgressUrl?"GET":"POST",r;v=k.newXHR();v.onreadystatechange=u;v.open(l,p,true);if(m.sessionProgressUrl){r=encodeURIComponent(m.sessionProgressName)+"="+encodeURIComponent(t);v.setRequestHeader("Content-type","application/x-www-form-urlencoded")}if(m.nginxProgressUrl){v.setRequestHeader(m.nginxProgressHeader,t)}v.setRequestHeader("X-Requested-With","XMLHttpRequest");v.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01");v.send((m.sessionProgressUrl&&r)||null)}},_initUpload:function(l){if(false===this._opts.startNonXHR.call(this,l.name,l.btn)){if(this._disabled){this.enable(true)}this._active--;return}this._hasProgUrl=(this._opts.progressUrl||this._opts.sessionProgressUrl||this._opts.nginxProgressUrl)?true:false;this._uploadIframe(l,this._progBox,this._sizeBox,this._progBar,this._pctBox,this._abortBtn,this._removeAbort);this._progBox=this._sizeBox=this._progBar=this._pctBox=this._abortBtn=this._removeAbort=null}};k.XhrUpload={_addFiles:function(q){var p=q.length,l,o,n,m;if(!this._opts.multiple){p=1}for(m=0;m<p;m++){l=k.getFilename(q[m].name);o=k.getExt(l);n=Math.round(q[m].size/1024);if(false===this._opts.onChange.call(this,l,o,this._overBtn,n)){return false}this._queue.push({id:k.getUID(),file:q[m],name:l,ext:o,btn:this._overBtn,size:n})}return true},_uploadXhr:function(A,r,C,n,m,x,u,B,l,q){var w=this,v=this._opts,t=k.newXHR(),s,p;if(m){m.innerHTML=A.size+"K"}if(B){B.innerHTML="0%"}if(x){x.style.width="0%"}v.onProgress.call(this,0);s=function(F,E){var D,H;try{if(s&&(E||t.readyState===4)){s=undefined;t.onreadystatechange=function(){};if(E){if(t.readyState!==4){t.abort()}v.onAbort.call(w,A.name,A.btn,A.size);w._last(m,u,B,l,q)}else{if(l){k.removeEvent(l,"click",p)}D=t.status;try{H=t.statusText}catch(G){H=""}if(D>=200&&D<300){v.endXHR.call(w,A.name,A.size,A.btn);w._finish(A,D,H,t.responseText,m,u,B,l,q)}else{w._errorFinish(A,D,H,t.responseText,"error",u,m,B,l,q)}}}}catch(G){if(!E){w._errorFinish(A,-1,G.message,false,"error",u,m,B,l,q)}}};if(l){p=function(){k.removeEvent(l,"click",p);if(s){s(undefined,true)}};k.addEvent(l,"click",p)}t.onreadystatechange=s;t.open(v.method.toUpperCase(),r,true);k.extendObj(n,v.customHeaders);for(var z in n){if(n.hasOwnProperty(z)){if(v.encodeCustomHeaders&&v.customHeaders.hasOwnProperty(z)){t.setRequestHeader(z,encodeURIComponent(n[z])+"")}else{t.setRequestHeader(z,n[z]+"")}}}k.addEvent(t.upload,"progress",function(D){if(D.lengthComputable){var E=Math.round((D.loaded/D.total)*100);v.onProgress.call(w,E);if(B){B.innerHTML=E+"%"}if(x){x.style.width=E+"%"}}});if(v.multipart===true){var y=new FormData();for(var o in C){if(C.hasOwnProperty(o)){y.append(o,C[o])}}y.append(v.name,A.file);this.log("Commencing upload using multipart form");t.send(y)}else{this.log("Commencing upload using binary stream");t.send(A.file)}this.removeCurrent(A.id)},_initUpload:function(m){var o={},n={},l;if(false===this._opts.startXHR.call(this,m.name,m.size,m.btn)){if(this._disabled){this.enable(true)}this._active--;return}o[this._opts.name]=m.name;n["X-Requested-With"]="XMLHttpRequest";n["X-File-Name"]=!this._opts.encodeCustomHeaders?m.name:encodeURIComponent(m.name);if(this._opts.responseType.toLowerCase()=="json"){n.Accept="application/json, text/javascript, */*; q=0.01"}if(!this._opts.multipart){n["Content-Type"]="application/octet-stream"}k.extendObj(o,this._opts.data);l=this._opts.noParams===true?this._opts.url:this._opts.url+((this._opts.url.indexOf("?")>-1)?"&":"?")+k.obj2string(o);this._uploadXhr(m,l,o,n,this._sizeBox,this._progBar,this._progBox,this._pctBox,this._abortBtn,this._removeAbort);this._sizeBox=this._progBar=this._progBox=this._pctBox=this._abortBtn=this._removeAbort=null}};(function(){k.extendObj(k.SimpleUpload.prototype,{_createInput:function(){var l=this,m=document.createElement("div");this._input=document.createElement("input");this._input.type="file";this._input.name=this._opts.name;if(i&&!f&&this._opts.multiple){this._input.multiple=true}if("accept" in this._input&&this._opts.accept!==""){this._input.accept=this._opts.accept}k.addStyles(m,{display:"block",position:"absolute",overflow:"hidden",margin:0,padding:0,opacity:0,direction:"ltr",zIndex:2147483582});k.addStyles(this._input,{position:"absolute",right:0,margin:0,padding:0,fontSize:"480px",fontFamily:"sans-serif",cursor:"pointer",height:"100%"});if(m.style.opacity!=="0"){m.style.filter="alpha(opacity=0)"}k.addEvent(this._input,"change",function(){if(!l._input||l._input.value===""){return}if(false===l._addFiles(i?l._input.files:l._input)){return}k.removeClass(l._overBtn,l._opts.hoverClass);k.removeClass(l._overBtn,l._opts.focusClass);k.remove(l._input.parentNode);delete l._input;l._createInput();if(l._opts.autoSubmit){l.submit()}});if(l._opts.hoverClass!==""){k.addEvent(m,"mouseover",function(){k.addClass(l._overBtn,l._opts.hoverClass)})}k.addEvent(m,"mouseout",function(){l._input.parentNode.style.visibility="hidden";if(l._opts.hoverClass!==""){k.removeClass(l._overBtn,l._opts.hoverClass);k.removeClass(l._overBtn,l._opts.focusClass)}});if(l._opts.focusClass!==""){k.addEvent(this._input,"focus",function(){k.addClass(l._overBtn,l._opts.focusClass)});k.addEvent(this._input,"blur",function(){k.removeClass(l._overBtn,l._opts.focusClass)})}m.appendChild(this._input);document.body.appendChild(m)},rerouteClicks:function(m){var l=this;m.off=k.addEvent(m,"mouseover",function(){if(l._disabled){return}if(!l._input){l._createInput()}l._overBtn=m;k.copyLayout(m,l._input.parentNode);l._input.parentNode.style.visibility="visible"});return m},_last:function(n,m,p,o,l){if(n){n.innerHTML=""}if(p){p.innerHTML=""}if(o&&l){k.remove(o)}if(m){k.remove(m)}this._active--;n=m=p=o=l=null;if(this._disabled){this.enable(true)}this._cycleQueue()},_errorFinish:function(n,q,m,p,o,r,l,u,s,t){this.log("Upload failed: "+q+" "+m);this._opts.onError.call(this,n.name,o,q,m,p,n.btn,n.size);this._last(l,r,u,s,t);n=q=m=p=o=l=r=u=s=t=null},_finish:function(n,p,m,o,l,q,t,r,s){this.log("Server response: "+o);if(this._opts.responseType.toLowerCase()=="json"){o=k.parseJSON(o);if(o===false){this._errorFinish(n,p,m,false,"parseerror",q,l,r,s);return}}this._opts.onComplete.call(this,n.name,o,n.btn,n.size);this._last(l,q,t,r,s);n=p=m=o=l=q=t=r=s=null},_checkFile:function(m){var n=false,l=this._opts.allowedExtensions.length;if(l>0){while(l--){if(this._opts.allowedExtensions[l].toLowerCase()==m.ext.toLowerCase()){n=true;break}}if(!n){this.removeCurrent(m.id);this.log("File extension not permitted");this._opts.onExtError.call(this,m.name,m.ext);return false}}if(m.size&&this._opts.maxSize!==false&&m.size>this._opts.maxSize){this.removeCurrent(m.id);this.log(m.name+" exceeds "+this._opts.maxSize+"K limit");this._opts.onSizeError.call(this,m.name,m.size);return false}m=null;return true},submit:function(){if(this._disabled||this._active>=this._opts.maxUploads||this._queue.length<1){return}if(!this._checkFile(this._queue[0])){return}if(false===this._opts.onSubmit.call(this,this._queue[0].name,this._queue[0].ext,this._queue[0].btn,this._queue[0].size)){return}this._active++;if(this._opts.multiple===false||this._opts.queue===false&&this._active>=this._opts.maxUploads){this.disable(true)}this._initUpload(this._queue[0])}});if(i){k.extendObj(k.SimpleUpload.prototype,k.XhrUpload)}else{k.extendObj(k.SimpleUpload.prototype,k.IframeUpload)}}());k.extendObj(k.SimpleUpload.prototype,{_dragFileCheck:function(m){if(m.dataTransfer.types){for(var l=0;l<m.dataTransfer.types.length;l++){if(m.dataTransfer.types[l]=="Files"){return true}}}return false},addDropZone:function(m){var l=this;k.addStyles(m,{zIndex:2147483583});m.ondragenter=function(n){if(!l._dragFileCheck(n)){return false}k.addClass(this,l._opts.dragClass);return false};m.ondragover=function(){return false};m.ondragend=function(){k.removeClass(this,l._opts.dragClass);return false};m.ondragleave=function(){k.removeClass(this,l._opts.dragClass);return false};m.ondrop=function(n){n.preventDefault();k.removeClass(this,l._opts.dragClass);if(!l._dragFileCheck(n)){return false}l._addFiles(n.dataTransfer.files);l._cycleQueue()}}});return k}));